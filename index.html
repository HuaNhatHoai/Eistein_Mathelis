<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Câu Đố Einstein - 5 Ngôi Nhà</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .house {
            transition: all 0.3s ease;
        }
        .house:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .draggable {
            cursor: grab;
            transition: all 0.2s ease;
        }
        .draggable:hover {
            transform: scale(1.05);
        }
        .draggable.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        .drop-zone {
            min-height: 40px;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        .clue {
            transition: all 0.3s ease;
        }
        .clue:hover {
            background-color: #f1f5f9;
            transform: translateX(5px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Login Screen -->
        <div id="loginScreen" class="text-center">
            <div class="bg-white rounded-lg shadow-xl p-8 max-w-md mx-auto">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">🏠 Câu đố Einstein-Mathelis</h1>
                <p class="text-lg text-gray-600 mb-1">Mathletica: Đố vui không thưởng #2</p>
                <p class="text-sm text-gray-500 mb-6">Kéo thả các thuộc tính vào đúng ngôi nhà để giải câu đố!</p>
                
                <div class="mb-6">
                    <label for="playerName" class="block text-sm font-medium text-gray-700 mb-2">Nhập tên của bạn:</label>
                    <input type="text" id="playerName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Tên của bạn...">
                </div>
                
                <button id="startGame" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    🚀 Bắt đầu chơi
                </button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">🏠 Câu đố Einstein-Mathelis</h1>
                <p class="text-lg text-gray-600">Mathletica: Đố vui không thưởng #2</p>
                <p class="text-sm text-gray-500 mt-1">Chào <span id="playerNameDisplay" class="font-semibold text-blue-600"></span>! Kéo thả các thuộc tính vào đúng ngôi nhà để giải câu đố!</p>
                <div class="mt-4 bg-white rounded-lg shadow p-4 inline-block">
                    <div class="text-lg font-semibold text-gray-700">⏱️ Thời gian: <span id="timer" class="text-blue-600">00:00</span></div>
                </div>
            </div>

        <!-- Houses -->
        <div class="space-y-4 mb-8">
            <!-- House 1 -->
            <div class="house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400" data-house="1">
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-6xl mb-2 font-bold text-slate-700">1</div>
                        <div class="font-bold text-slate-800 text-lg">Nhà số 1</div>
                        <div class="flex justify-center gap-2 mt-2 min-h-[32px]" id="icons-1">
                            <span class="pet-icon text-2xl" style="display: none;"></span>
                            <span class="drink-icon text-2xl" style="display: none;"></span>
                            <span class="job-icon text-2xl" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-4 flex-1">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Màu sắc</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="1" data-type="color">
                                <option value="">Chọn...</option>
                                <option value="Vàng">🟡 Vàng</option>
                                <option value="Xanh dương">🔵 Xanh dương</option>
                                <option value="Đỏ">🔴 Đỏ</option>
                                <option value="Trắng">⚪ Trắng</option>
                                <option value="Xanh lá">🟢 Xanh lá</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Quốc tịch</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="1" data-type="nationality">
                                <option value="">Chọn...</option>
                                <option value="Anh">🇬🇧 Anh</option>
                                <option value="Tây Ban Nha">🇪🇸 Tây Ban Nha</option>
                                <option value="Ukraine">🇺🇦 Ukraine</option>
                                <option value="Na Uy">🇳🇴 Na Uy</option>
                                <option value="Nhật">🇯🇵 Nhật</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Thú cưng</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="1" data-type="pet">
                                <option value="">Chọn...</option>
                                <option value="Chó">🐕 Chó</option>
                                <option value="Ốc sên">🐌 Ốc sên</option>
                                <option value="Cáo">🦊 Cáo</option>
                                <option value="Ngựa">🐎 Ngựa</option>
                                <option value="Ngựa vằn">🦓 Ngựa vằn</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Đồ uống</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="1" data-type="drink">
                                <option value="">Chọn...</option>
                                <option value="Cà phê">☕ Cà phê</option>
                                <option value="Trà">🍵 Trà</option>
                                <option value="Sữa">🥛 Sữa</option>
                                <option value="Nước cam">🍊 Nước cam</option>
                                <option value="Nước">💧 Nước</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Nghề nghiệp</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="1" data-type="job">
                                <option value="">Chọn...</option>
                                <option value="Thợ mộc">🔨 Thợ mộc</option>
                                <option value="Giáo viên">👨‍🏫 Giáo viên</option>
                                <option value="Làm vườn">🌱 Làm vườn</option>
                                <option value="Bác sĩ">👨‍⚕️ Bác sĩ</option>
                                <option value="Thợ làm bánh">👨‍🍳 Thợ làm bánh</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- House 2 -->
            <div class="house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400" data-house="2">
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-6xl mb-2 font-bold text-slate-700">2</div>
                        <div class="font-bold text-slate-800 text-lg">Nhà số 2</div>
                        <div class="flex justify-center gap-2 mt-2 min-h-[32px]" id="icons-2">
                            <span class="pet-icon text-2xl" style="display: none;"></span>
                            <span class="drink-icon text-2xl" style="display: none;"></span>
                            <span class="job-icon text-2xl" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-4 flex-1">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Màu sắc</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="2" data-type="color">
                                <option value="">Chọn...</option>
                                <option value="Vàng">🟡 Vàng</option>
                                <option value="Xanh dương">🔵 Xanh dương</option>
                                <option value="Đỏ">🔴 Đỏ</option>
                                <option value="Trắng">⚪ Trắng</option>
                                <option value="Xanh lá">🟢 Xanh lá</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Quốc tịch</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="2" data-type="nationality">
                                <option value="">Chọn...</option>
                                <option value="Anh">🇬🇧 Anh</option>
                                <option value="Tây Ban Nha">🇪🇸 Tây Ban Nha</option>
                                <option value="Ukraine">🇺🇦 Ukraine</option>
                                <option value="Na Uy">🇳🇴 Na Uy</option>
                                <option value="Nhật">🇯🇵 Nhật</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Thú cưng</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="2" data-type="pet">
                                <option value="">Chọn...</option>
                                <option value="Chó">🐕 Chó</option>
                                <option value="Ốc sên">🐌 Ốc sên</option>
                                <option value="Cáo">🦊 Cáo</option>
                                <option value="Ngựa">🐎 Ngựa</option>
                                <option value="Ngựa vằn">🦓 Ngựa vằn</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Đồ uống</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="2" data-type="drink">
                                <option value="">Chọn...</option>
                                <option value="Cà phê">☕ Cà phê</option>
                                <option value="Trà">🍵 Trà</option>
                                <option value="Sữa">🥛 Sữa</option>
                                <option value="Nước cam">🍊 Nước cam</option>
                                <option value="Nước">💧 Nước</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Nghề nghiệp</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="2" data-type="job">
                                <option value="">Chọn...</option>
                                <option value="Thợ mộc">🔨 Thợ mộc</option>
                                <option value="Giáo viên">👨‍🏫 Giáo viên</option>
                                <option value="Làm vườn">🌱 Làm vườn</option>
                                <option value="Bác sĩ">👨‍⚕️ Bác sĩ</option>
                                <option value="Thợ làm bánh">👨‍🍳 Thợ làm bánh</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- House 3 -->
            <div class="house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400" data-house="3">
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-6xl mb-2 font-bold text-slate-700">3</div>
                        <div class="font-bold text-slate-800 text-lg">Nhà số 3</div>
                        <div class="flex justify-center gap-2 mt-2 min-h-[32px]" id="icons-3">
                            <span class="pet-icon text-2xl" style="display: none;"></span>
                            <span class="drink-icon text-2xl" style="display: none;"></span>
                            <span class="job-icon text-2xl" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-4 flex-1">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Màu sắc</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="3" data-type="color">
                                <option value="">Chọn...</option>
                                <option value="Vàng">🟡 Vàng</option>
                                <option value="Xanh dương">🔵 Xanh dương</option>
                                <option value="Đỏ">🔴 Đỏ</option>
                                <option value="Trắng">⚪ Trắng</option>
                                <option value="Xanh lá">🟢 Xanh lá</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Quốc tịch</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="3" data-type="nationality">
                                <option value="">Chọn...</option>
                                <option value="Anh">🇬🇧 Anh</option>
                                <option value="Tây Ban Nha">🇪🇸 Tây Ban Nha</option>
                                <option value="Ukraine">🇺🇦 Ukraine</option>
                                <option value="Na Uy">🇳🇴 Na Uy</option>
                                <option value="Nhật">🇯🇵 Nhật</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Thú cưng</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="3" data-type="pet">
                                <option value="">Chọn...</option>
                                <option value="Chó">🐕 Chó</option>
                                <option value="Ốc sên">🐌 Ốc sên</option>
                                <option value="Cáo">🦊 Cáo</option>
                                <option value="Ngựa">🐎 Ngựa</option>
                                <option value="Ngựa vằn">🦓 Ngựa vằn</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Đồ uống</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="3" data-type="drink">
                                <option value="">Chọn...</option>
                                <option value="Cà phê">☕ Cà phê</option>
                                <option value="Trà">🍵 Trà</option>
                                <option value="Sữa">🥛 Sữa</option>
                                <option value="Nước cam">🍊 Nước cam</option>
                                <option value="Nước">💧 Nước</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Nghề nghiệp</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="3" data-type="job">
                                <option value="">Chọn...</option>
                                <option value="Thợ mộc">🔨 Thợ mộc</option>
                                <option value="Giáo viên">👨‍🏫 Giáo viên</option>
                                <option value="Làm vườn">🌱 Làm vườn</option>
                                <option value="Bác sĩ">👨‍⚕️ Bác sĩ</option>
                                <option value="Thợ làm bánh">👨‍🍳 Thợ làm bánh</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- House 4 -->
            <div class="house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400" data-house="4">
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-6xl mb-2 font-bold text-slate-700">4</div>
                        <div class="font-bold text-slate-800 text-lg">Nhà số 4</div>
                        <div class="flex justify-center gap-2 mt-2 min-h-[32px]" id="icons-4">
                            <span class="pet-icon text-2xl" style="display: none;"></span>
                            <span class="drink-icon text-2xl" style="display: none;"></span>
                            <span class="job-icon text-2xl" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-4 flex-1">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Màu sắc</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="4" data-type="color">
                                <option value="">Chọn...</option>
                                <option value="Vàng">🟡 Vàng</option>
                                <option value="Xanh dương">🔵 Xanh dương</option>
                                <option value="Đỏ">🔴 Đỏ</option>
                                <option value="Trắng">⚪ Trắng</option>
                                <option value="Xanh lá">🟢 Xanh lá</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Quốc tịch</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="4" data-type="nationality">
                                <option value="">Chọn...</option>
                                <option value="Anh">🇬🇧 Anh</option>
                                <option value="Tây Ban Nha">🇪🇸 Tây Ban Nha</option>
                                <option value="Ukraine">🇺🇦 Ukraine</option>
                                <option value="Na Uy">🇳🇴 Na Uy</option>
                                <option value="Nhật">🇯🇵 Nhật</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Thú cưng</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="4" data-type="pet">
                                <option value="">Chọn...</option>
                                <option value="Chó">🐕 Chó</option>
                                <option value="Ốc sên">🐌 Ốc sên</option>
                                <option value="Cáo">🦊 Cáo</option>
                                <option value="Ngựa">🐎 Ngựa</option>
                                <option value="Ngựa vằn">🦓 Ngựa vằn</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Đồ uống</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="4" data-type="drink">
                                <option value="">Chọn...</option>
                                <option value="Cà phê">☕ Cà phê</option>
                                <option value="Trà">🍵 Trà</option>
                                <option value="Sữa">🥛 Sữa</option>
                                <option value="Nước cam">🍊 Nước cam</option>
                                <option value="Nước">💧 Nước</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Nghề nghiệp</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="4" data-type="job">
                                <option value="">Chọn...</option>
                                <option value="Thợ mộc">🔨 Thợ mộc</option>
                                <option value="Giáo viên">👨‍🏫 Giáo viên</option>
                                <option value="Làm vườn">🌱 Làm vườn</option>
                                <option value="Bác sĩ">👨‍⚕️ Bác sĩ</option>
                                <option value="Thợ làm bánh">👨‍🍳 Thợ làm bánh</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- House 5 -->
            <div class="house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400" data-house="5">
                <div class="flex items-center gap-6">
                    <div class="text-center">
                        <div class="text-6xl mb-2 font-bold text-slate-700">5</div>
                        <div class="font-bold text-slate-800 text-lg">Nhà số 5</div>
                        <div class="flex justify-center gap-2 mt-2 min-h-[32px]" id="icons-5">
                            <span class="pet-icon text-2xl" style="display: none;"></span>
                            <span class="drink-icon text-2xl" style="display: none;"></span>
                            <span class="job-icon text-2xl" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-4 flex-1">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Màu sắc</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="5" data-type="color">
                                <option value="">Chọn...</option>
                                <option value="Vàng">🟡 Vàng</option>
                                <option value="Xanh dương">🔵 Xanh dương</option>
                                <option value="Đỏ">🔴 Đỏ</option>
                                <option value="Trắng">⚪ Trắng</option>
                                <option value="Xanh lá">🟢 Xanh lá</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Quốc tịch</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="5" data-type="nationality">
                                <option value="">Chọn...</option>
                                <option value="Anh">🇬🇧 Anh</option>
                                <option value="Tây Ban Nha">🇪🇸 Tây Ban Nha</option>
                                <option value="Ukraine">🇺🇦 Ukraine</option>
                                <option value="Na Uy">🇳🇴 Na Uy</option>
                                <option value="Nhật">🇯🇵 Nhật</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Thú cưng</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="5" data-type="pet">
                                <option value="">Chọn...</option>
                                <option value="Chó">🐕 Chó</option>
                                <option value="Ốc sên">🐌 Ốc sên</option>
                                <option value="Cáo">🦊 Cáo</option>
                                <option value="Ngựa">🐎 Ngựa</option>
                                <option value="Ngựa vằn">🦓 Ngựa vằn</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Đồ uống</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="5" data-type="drink">
                                <option value="">Chọn...</option>
                                <option value="Cà phê">☕ Cà phê</option>
                                <option value="Trà">🍵 Trà</option>
                                <option value="Sữa">🥛 Sữa</option>
                                <option value="Nước cam">🍊 Nước cam</option>
                                <option value="Nước">💧 Nước</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Nghề nghiệp</label>
                            <select class="attribute-select w-full p-2 border border-slate-300 rounded-lg bg-white" data-house="5" data-type="job">
                                <option value="">Chọn...</option>
                                <option value="Thợ mộc">🔨 Thợ mộc</option>
                                <option value="Giáo viên">👨‍🏫 Giáo viên</option>
                                <option value="Làm vườn">🌱 Làm vườn</option>
                                <option value="Bác sĩ">👨‍⚕️ Bác sĩ</option>
                                <option value="Thợ làm bánh">👨‍🍳 Thợ làm bánh</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Panel and Clues -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Control Panel -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">🎮 Điều khiển trò chơi</h3>
                
                <div class="mt-6 flex gap-4">
                    <button id="checkSolution" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                        ✅ Kiểm tra đáp án
                    </button>
                    <button id="resetGame" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                        🔄 Làm lại
                    </button>
                </div>
                <div id="progressInfo" class="mt-4 text-sm text-gray-600 text-center">
                    Điền tất cả thuộc tính để kiểm tra đáp án (0/25)
                </div>

                <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded">
                    <h4 class="font-bold text-blue-800 mb-2">📋 Hướng dẫn:</h4>
                    <p class="text-blue-700 text-sm">• Chọn thuộc tính từ danh sách thả xuống cho mỗi ngôi nhà</p>
                    <p class="text-blue-700 text-sm">• Mỗi thuộc tính chỉ có thể được sử dụng một lần</p>
                    <p class="text-blue-700 text-sm">• Sử dụng các gợi ý để tìm ra đáp án đúng</p>
                </div>
            </div>

            <!-- Clues -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">📝 Gợi ý</h3>
                <div class="space-y-2 text-sm">
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người Anh sống trong ngôi nhà màu đỏ</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người Tây Ban Nha sở hữu con chó</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Cà phê được uống trong ngôi nhà màu xanh lá</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người Ukraine uống trà</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Ngôi nhà màu xanh lá nằm ngay phía dưới ngôi nhà màu trắng</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Thợ mộc sở hữu ốc sên</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Giáo viên sống trong ngôi nhà màu vàng</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Sữa được uống trong ngôi nhà số 3</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người Na Uy sống trong ngôi nhà số 1</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người làm vườn sống cạnh người có con cáo</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Giáo viên sống cạnh ngôi nhà có nuôi ngựa</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Bác sĩ uống nước cam</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Thợ làm bánh là người Nhật</div>
                    <div class="clue p-3 bg-gray-50 rounded-lg">• Người Na Uy sống cạnh ngôi nhà màu xanh dương</div>
                </div>

                <div class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded">
                    <h4 class="font-bold text-yellow-800 mb-2">🎯 Câu hỏi:</h4>
                    <p class="text-yellow-700">• Ai uống nước?</p>
                    <p class="text-yellow-700">• Ai sở hữu ngựa vằn?</p>
                </div>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg p-8 max-w-md mx-4">
                <div id="resultContent" class="text-center">
                    <!-- Result content will be inserted here -->
                </div>
                <button id="closeModal" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold w-full transition-colors">
                    Đóng
                </button>
            </div>
        </div>
        </div>
    </div>

    <script>
        // Game variables
        let playerName = '';
        let startTime = null;
        let timerInterval = null;
        let usedItems = {
            color: new Set(),
            nationality: new Set(),
            pet: new Set(),
            drink: new Set(),
            job: new Set()
        };

        // Game state - using house number as identifier
        let gameState = {
            "1": {color: null, nationality: null, pet: null, drink: null, job: null},
            "2": {color: null, nationality: null, pet: null, drink: null, job: null},
            "3": {color: null, nationality: null, pet: null, drink: null, job: null},
            "4": {color: null, nationality: null, pet: null, drink: null, job: null},
            "5": {color: null, nationality: null, pet: null, drink: null, job: null}
        };

        // Correct solution - using house number as identifier
        const correctSolution = {
            "1": {color: "Vàng", nationality: "Na Uy", pet: "Cáo", drink: "Nước", job: "Giáo viên"},
            "2": {color: "Xanh dương", nationality: "Ukraine", pet: "Ngựa", drink: "Trà", job: "Làm vườn"},
            "3": {color: "Đỏ", nationality: "Anh", pet: "Ốc sên", drink: "Sữa", job: "Thợ mộc"},
            "4": {color: "Trắng", nationality: "Tây Ban Nha", pet: "Chó", drink: "Nước cam", job: "Bác sĩ"},
            "5": {color: "Xanh lá", nationality: "Nhật", pet: "Ngựa vằn", drink: "Cà phê", job: "Thợ làm bánh"}
        };

        // Login functionality
        const playerNameInput = document.getElementById('playerName');
        const startGameBtn = document.getElementById('startGame');
        const loginScreen = document.getElementById('loginScreen');
        const gameScreen = document.getElementById('gameScreen');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const timerDisplay = document.getElementById('timer');

        playerNameInput.addEventListener('input', function() {
            startGameBtn.disabled = this.value.trim().length === 0;
        });

        playerNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !startGameBtn.disabled) {
                startGameFunction();
            }
        });

        startGameBtn.addEventListener('click', startGameFunction);

        function startGameFunction() {
            playerName = playerNameInput.value.trim();
            if (playerName) {
                playerNameDisplay.textContent = playerName;
                loginScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                startTimer();
            }
        }

        function startTimer() {
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function getElapsedTime() {
            if (startTime) {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            return '00:00';
        }

        // Dropdown functionality
        document.querySelectorAll('.attribute-select').forEach(select => {
            select.addEventListener('change', function() {
                const house = this.dataset.house;
                const type = this.dataset.type;
                const newValue = this.value;
                const oldValue = gameState[house][type];

                // If there was an old value, remove it from used items
                if (oldValue) {
                    usedItems[type].delete(oldValue);
                }

                // If new value is selected, add it to used items
                if (newValue) {
                    usedItems[type].add(newValue);
                }

                // Update game state
                gameState[house][type] = newValue || null;

                // Update house color if color attribute changed
                if (type === 'color') {
                    updateHouseColor(house, newValue);
                }

                // Update house flag if nationality attribute changed
                if (type === 'nationality') {
                    updateHouseFlag(house, newValue);
                }

                // Update house icons for pet, drink, job
                if (type === 'pet' || type === 'drink' || type === 'job') {
                    updateHouseIcons(house, type, newValue);
                }

                // Update all dropdowns to reflect used items
                updateDropdownOptions();
                updateProgress();
            });
        });

        function updateHouseColor(houseNumber, color) {
            const houseElement = document.querySelector(`[data-house="${houseNumber}"]`);
            
            // Reset to default color first
            houseElement.className = 'house bg-slate-100 rounded-lg shadow-lg p-6 border-4 border-slate-400';
            
            // Apply new color if selected
            if (color) {
                switch(color) {
                    case 'Vàng':
                        houseElement.className = 'house bg-yellow-100 rounded-lg shadow-lg p-6 border-4 border-yellow-400';
                        break;
                    case 'Xanh dương':
                        houseElement.className = 'house bg-blue-100 rounded-lg shadow-lg p-6 border-4 border-blue-400';
                        break;
                    case 'Đỏ':
                        houseElement.className = 'house bg-red-100 rounded-lg shadow-lg p-6 border-4 border-red-400';
                        break;
                    case 'Trắng':
                        houseElement.className = 'house bg-gray-50 rounded-lg shadow-lg p-6 border-4 border-gray-300';
                        break;
                    case 'Xanh lá':
                        houseElement.className = 'house bg-green-100 rounded-lg shadow-lg p-6 border-4 border-green-400';
                        break;
                }
            }
        }

        function updateHouseFlag(houseNumber, nationality) {
            const houseNumberElement = document.querySelector(`[data-house="${houseNumber}"] .text-6xl`);
            
            // Reset to default number first
            houseNumberElement.innerHTML = houseNumber;
            houseNumberElement.className = 'text-6xl mb-2 font-bold text-slate-700';
            
            // Apply flag image if nationality is selected
            if (nationality) {
                let flagSvg = '';
                switch(nationality) {
                    case 'Anh':
                        flagSvg = `<svg class="w-16 h-12 mx-auto" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg">
                            <rect width="60" height="30" fill="#012169"/>
                            <g stroke="#fff" stroke-width="6">
                                <path d="m0,0 60,30 m0,-30 -60,30"/>
                            </g>
                            <g stroke="#C8102E" stroke-width="4">
                                <path d="m0,0 60,30 m0,-30 -60,30"/>
                            </g>
                            <path stroke="#fff" stroke-width="10" d="M30,0 v30 M0,15 h60"/>
                            <path stroke="#C8102E" stroke-width="6" d="M30,0 v30 M0,15 h60"/>
                        </svg>`;
                        break;
                    case 'Tây Ban Nha':
                        flagSvg = `<svg class="w-16 h-12 mx-auto" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg">
                            <rect width="60" height="30" fill="#AA151B"/>
                            <rect width="60" height="15" y="7.5" fill="#F1BF00"/>
                        </svg>`;
                        break;
                    case 'Ukraine':
                        flagSvg = `<svg class="w-16 h-12 mx-auto" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg">
                            <rect width="60" height="15" fill="#005BBB"/>
                            <rect width="60" height="15" y="15" fill="#FFD500"/>
                        </svg>`;
                        break;
                    case 'Na Uy':
                        flagSvg = `<svg class="w-16 h-12 mx-auto" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg">
                            <rect width="60" height="30" fill="#BA0C2F"/>
                            <rect width="60" height="6" y="12" fill="#fff"/>
                            <rect width="6" height="30" x="18" fill="#fff"/>
                            <rect width="60" height="2" y="14" fill="#00205B"/>
                            <rect width="2" height="30" x="20" fill="#00205B"/>
                        </svg>`;
                        break;
                    case 'Nhật':
                        flagSvg = `<svg class="w-16 h-12 mx-auto" viewBox="0 0 60 30" xmlns="http://www.w3.org/2000/svg">
                            <rect width="60" height="30" fill="#fff"/>
                            <circle cx="30" cy="15" r="9" fill="#BC002D"/>
                        </svg>`;
                        break;
                }
                houseNumberElement.innerHTML = flagSvg;
                houseNumberElement.className = 'mb-2 flex justify-center items-center';
            }
        }

        function updateHouseIcons(houseNumber, type, value) {
            const iconsContainer = document.getElementById(`icons-${houseNumber}`);
            let iconElement;
            
            if (type === 'pet') {
                iconElement = iconsContainer.querySelector('.pet-icon');
            } else if (type === 'drink') {
                iconElement = iconsContainer.querySelector('.drink-icon');
            } else if (type === 'job') {
                iconElement = iconsContainer.querySelector('.job-icon');
            }
            
            if (!iconElement) return;
            
            // Hide icon if no value selected
            if (!value) {
                iconElement.style.display = 'none';
                iconElement.textContent = '';
                return;
            }
            
            // Show and update icon based on value
            iconElement.style.display = 'inline-block';
            
            let icon = '';
            switch(value) {
                // Pet icons
                case 'Chó': icon = '🐕'; break;
                case 'Ốc sên': icon = '🐌'; break;
                case 'Cáo': icon = '🦊'; break;
                case 'Ngựa': icon = '🐎'; break;
                case 'Ngựa vằn': icon = '🦓'; break;
                
                // Drink icons
                case 'Cà phê': icon = '☕'; break;
                case 'Trà': icon = '🍵'; break;
                case 'Sữa': icon = '🥛'; break;
                case 'Nước cam': icon = '🍊'; break;
                case 'Nước': icon = '💧'; break;
                
                // Job icons
                case 'Thợ mộc': icon = '🔨'; break;
                case 'Giáo viên': icon = '👨‍🏫'; break;
                case 'Làm vườn': icon = '🌱'; break;
                case 'Bác sĩ': icon = '👨‍⚕️'; break;
                case 'Thợ làm bánh': icon = '👨‍🍳'; break;
                
                default: icon = '';
            }
            
            iconElement.textContent = icon;
        }

        function updateDropdownOptions() {
            document.querySelectorAll('.attribute-select').forEach(select => {
                const type = select.dataset.type;
                const house = select.dataset.house;
                const currentValue = gameState[house][type];

                // Update options availability
                Array.from(select.options).forEach(option => {
                    if (option.value === '') return; // Skip empty option
                    
                    if (usedItems[type].has(option.value) && option.value !== currentValue) {
                        option.disabled = true;
                        option.style.color = '#9ca3af';
                    } else {
                        option.disabled = false;
                        option.style.color = '';
                    }
                });
            });
        }

        function updateGameState() {
            // Game state is already updated in the dropdown change handler
            // Just update progress
            updateProgress();
        }

        function updateProgress() {
            let filledSlots = 0;
            const totalSlots = 25; // 5 houses × 5 attributes each

            for (let house in gameState) {
                for (let type in gameState[house]) {
                    if (gameState[house][type] !== null) {
                        filledSlots++;
                    }
                }
            }

            const progressInfo = document.getElementById('progressInfo');
            const checkButton = document.getElementById('checkSolution');
            
            progressInfo.textContent = `Điền tất cả thuộc tính để kiểm tra đáp án (${filledSlots}/${totalSlots})`;
            
            if (filledSlots === totalSlots) {
                checkButton.disabled = false;
                progressInfo.textContent = `Đã điền đủ! Nhấn kiểm tra đáp án (${filledSlots}/${totalSlots})`;
                progressInfo.classList.add('text-green-600', 'font-semibold');
                progressInfo.classList.remove('text-gray-600');
            } else {
                checkButton.disabled = true;
                progressInfo.classList.remove('text-green-600', 'font-semibold');
                progressInfo.classList.add('text-gray-600');
            }
        }

        function checkSolution() {
            let correct = true;
            let correctCount = 0;
            let totalSlots = 25;

            for (let house in correctSolution) {
                for (let type in correctSolution[house]) {
                    if (gameState[house][type] === correctSolution[house][type]) {
                        correctCount++;
                    } else {
                        correct = false;
                    }
                }
            }

            const modal = document.getElementById('resultModal');
            const content = document.getElementById('resultContent');

            if (correctCount === totalSlots && correct) {
                stopTimer();
                const completionTime = getElapsedTime();
                content.innerHTML = `
                    <div class="text-6xl mb-4">🎉</div>
                    <h3 class="text-2xl font-bold text-green-600 mb-2">Chúc mừng ${playerName}!</h3>
                    <p class="text-gray-700 mb-2">Bạn đã giải đúng câu đố Einstein!</p>
                    <p class="text-lg font-semibold text-blue-600 mb-4">⏱️ Thời gian hoàn thành: ${completionTime}</p>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <p class="font-semibold text-green-800">Đáp án:</p>
                        <p class="text-green-700">• Người Na Uy (nhà số 1) uống nước</p>
                        <p class="text-green-700">• Người Nhật (nhà số 5) sở hữu ngựa vằn</p>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="text-6xl mb-4">🤔</div>
                    <h3 class="text-2xl font-bold text-orange-600 mb-2">Chưa đúng!</h3>
                    <p class="text-gray-700 mb-2">Bạn đã điền đúng ${correctCount}/${totalSlots} thuộc tính.</p>
                    <p class="text-gray-600">Hãy kiểm tra lại các gợi ý và thử lại!</p>
                `;
            }

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }



        function resetGame() {
            // Reset all dropdowns
            document.querySelectorAll('.attribute-select').forEach(select => {
                select.value = '';
            });

            // Reset game state
            for (let house in gameState) {
                for (let type in gameState[house]) {
                    gameState[house][type] = null;
                }
            }

            // Reset used items
            for (let type in usedItems) {
                usedItems[type].clear();
            }

            // Reset all house colors, flags, and icons to default
            for (let i = 1; i <= 5; i++) {
                updateHouseColor(i.toString(), null);
                updateHouseFlag(i.toString(), null);
                // Reset icons
                updateHouseIcons(i.toString(), 'pet', null);
                updateHouseIcons(i.toString(), 'drink', null);
                updateHouseIcons(i.toString(), 'job', null);
            }

            updateDropdownOptions();
            updateGameState();
        }

        // Event listeners
        document.getElementById('checkSolution').addEventListener('click', checkSolution);
        document.getElementById('resetGame').addEventListener('click', resetGame);
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('resultModal').classList.add('hidden');
            document.getElementById('resultModal').classList.remove('flex');
        });

        // Close modal when clicking outside
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
                this.classList.remove('flex');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9716efa25585e60e',t:'MTc1NTU3ODA0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
